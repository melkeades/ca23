{
    "sourceFile": "src/main-old.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1687827381062,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1687827381062,
            "name": "Commit-0",
            "content": "import './style.styl'\nimport Lenis from '@studio-freight/lenis'\nimport gsap from 'gsap'\nimport CSSRulePlugin from 'gsap/CSSRulePlugin'\nimport CustomEase from 'gsap/CustomEase'\nimport ScrollTrigger from 'gsap/ScrollTrigger'\nimport $ from 'jquery'\nimport SplitType from 'split-type'\n\nconst devMode = true\nconst sel = (e) => document.querySelector(e)\n\nif (devMode) {\n  sel('.hero_video2').setAttribute('data-video-urls', '')\n  const contactVid = sel('.contact_bg_video')\n  contactVid.setAttribute('data-video-urls', '')\n  cont\n}\n\nconst lenis = new Lenis({\n  duration: 1.2,\n  easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)), // https://www.desmos.com/calculator/brs54l4xou\n  direction: 'vertical', // vertical, horizontal\n  gestureDirection: 'vertical', // vertical, horizontal, both\n  smooth: true,\n  mouseMultiplier: 1.3,\n  smoothTouch: false,\n  touchMultiplier: 2,\n  infinite: false,\n})\n\nfunction raf(time) {\n  lenis.raf(time)\n  requestAnimationFrame(raf)\n}\n\nrequestAnimationFrame(raf)\n\ngsap.registerPlugin(CSSRulePlugin, CustomEase, ScrollTrigger)\n\nlet lenisScroll = 0\n\n//get scroll value\nlenis.on('scroll', ({ scroll, limit, velocity, direction, progress }) => {\n  // console.log({ scroll, limit, velocity, direction, progress })\n  lenisScroll = scroll\n})\nfunction onReady() {\n  new SplitType('#heroTitle', {\n    types: 'lines',\n    lineClass: 'lineParent',\n    // tagName: 'span',\n  })\n\n  const heroTitle = new SplitType('#heroTitle > .lineParent', {\n    types: 'lines',\n  })\n\n  const animationWrapperSuffix = '-animationWrapper'\n  const animationWrapper = (className) => {\n    return $('.' + className).wrap('<div class=' + className + animationWrapperSuffix + '></div>')\n  }\n  $(['hero_btn', 'hero_hr', 'hero_awards', 'hero_navbar']).each((i, el) => {\n    animationWrapper(el)\n  })\n\n  const heroCopy = $('#heroCopy').wrap(\"<div class='hero_copyW'></div>\")\n\n  ScrollTrigger.defaults({ markers: true })\n  const heroVideoAfter = CSSRulePlugin.getRule('.hero_video2:after')\n  const tlLoad = gsap.timeline({ defaults: { ease: 'power4.out', duration: 2 } })\n  const tlScrollHero = gsap.timeline({\n    defaults: { ease: 'power1.in', duration: 3 },\n    // paused: true,\n  })\n  // tlScrollHero.pause()\n  // set(heroVideoAfter, { transformOrigin: 'bottom' })\n  const tlWorkTitle = gsap.timeline({ defaults: { ease: 'none', duration: 3 } })\n\n  tlLoad\n    .from('.hero_video2', {\n      ease: CustomEase.create('custom', 'M0,0 C0.29,0 0.219,0.018 0.29,0.103 0.359,0.186 0.413,0.798 0.476,0.892 0.551,1.003 0.704,1 1,1'),\n      duration: 2.5,\n      width: '100%',\n      // transformOrigin: 'left top',\n      // onComplete: heroVideoOrigin,\n    })\n    .to(heroVideoAfter, { cssRule: { height: '0%' } }, '>-=1.2')\n    .from([heroTitle.lines, heroCopy], { yPercent: 120, stagger: 0.25 }, '<')\n    .from(['.hero_logo', '.hero_btn'], { x: 50, opacity: 0, duration: 3 }, '>-=1.8')\n    .from(['.hero_menu', '.hero_awards'], { x: -50, opacity: 0, duration: 3 }, '<')\n    .from('.hero_hr', { scaleX: 0.8, opacity: 0, duration: 3 }, '<')\n    .addLabel('tlLoadEnd')\n  // .add(tlScrollHero.tweenFromTo(0, tlScrollHero.duration()))\n\n  if (!elementInViewport('hero')) {\n    console.log(tlLoad.progress())\n    tlLoad.pause\n    // tlLoad.seek('tlLoadEnd')\n    tlLoad.progress(1, false)\n    console.log(tlLoad.progress())\n  }\n\n  ScrollTrigger.create({\n    markers: false,\n    animation: heroScrollAni(),\n    trigger: '.hero',\n    start: 'top top',\n    end: 'bottom 30%',\n    toggleActions: 'play reverse restart reverse',\n    scrub: 1,\n  })\n\n  function heroScrollAni() {\n    const heroSquish = 100 + '%'\n    tlScrollHero\n      .to('.hero_video2', { ease: 'none', opacity: 0.1, clipPath: 'polygon(' + heroSquish + ' 0%, 100% 0%, 100% 100%, ' + heroSquish + ' 100%' })\n      .to(['.hero_navbar-animationWrapper', '#heroTitle>.lineParent', '.hero_copyW', '.hero_cta'], { y: -500, stagger: { amount: 1 }, duration: 2 }, '<')\n      .to('.hero_hr-animationWrapper', { scaleX: 0, duration: 2.35 }, '<')\n      .to(['.hero_btn-animationWrapper', '.hero_awards-animationWrapper'], { opacity: 0, ease: 'power2.in', duration: 2.4 }, '<')\n\n    return tlScrollHero\n  }\n  ScrollTrigger.config({\n    limitCallbacks: true,\n  })\n  ScrollTrigger.create({\n    markers: false,\n    trigger: '.hero',\n    start: 'bottom bottom',\n    onUpdate: (self) => {\n      if (self.direction === -1) {\n        scrollUp()\n      }\n    },\n  })\n\n  ScrollTrigger.create({\n    markers: false,\n    trigger: '.contact_fg',\n    start: 'top center',\n    animation: gsap.timeline().to('.contact_bg', { '-webkit-mask-size': '200%' }),\n    toggleActions: 'play reverse restart reverse',\n    scrub: 1,\n    onUpdate: (self) => {\n      if (self.direction === 1) {\n        scrollDown()\n      }\n    },\n  })\n\n  tlWorkTitle\n    // .set('.work_title>.section_title-leaf', { backgroundAattachment: 'fixed', paddingTop: '5px' })\n    // .to('.work_title', { yPercent: -30, ease: 'linear' })\n    .from('.work_title>.work_title_leaf', { yPercent: 30 }, '<')\n    .from('.work_title>.work_title_leaf-outline', { yPercent: 50 }, '<')\n    .fromTo('.work_title>.section_title-green', { yPercent: 90 }, { yPercent: -30 }, '<')\n\n  ScrollTrigger.create({\n    markers: false,\n    trigger: '.work_title',\n    start: 'top center+=20%',\n    end: 'bottom top',\n    animation: tlWorkTitle,\n    toggleActions: 'play reverse restart reverse',\n    scrub: 1,\n  })\n\n  function scrollUp() {\n    lenis.scrollTo('.hero', {\n      duration: (2 * lenisScroll) / 300,\n      esing: (x) => {\n        x === 0 ? 0 : Math.pow(2, 10 * x - 10) // https://easings.net/en#easeInOutQuart\n        // inout exp: x < 0.5 ? 8 * x * x * x * x : 1 - Math.pow(-2 * x + 2, 4) / 2\n        // out exp: x === 1 ? 1 : 1 - Math.pow(2, -10 * x)\n        // in exp: x === 0 ? 0 : Math.pow(2, 10 * x - 10)\n      },\n    })\n  }\n  function scrollDown() {\n    lenis.scrollTo('.footer', {\n      duration: 4,\n    })\n  }\n}\n\nfunction elementInViewport(myElement) {\n  const element = document.getElementById(myElement)\n  const bounding = element.getBoundingClientRect()\n  const myElementHeight = element.offsetHeight\n  const myElementWidth = element.offsetWidth\n\n  if (\n    bounding.top >= -myElementHeight &&\n    bounding.left >= -myElementWidth &&\n    bounding.right <= (window.innerWidth || document.documentElement.clientWidth) + myElementWidth &&\n    bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) + myElementHeight\n  ) {\n    return true\n  } else {\n    return false\n  }\n}\n\nif (document.readyState !== 'loading') {\n  onReady()\n} else {\n  document.addEventListener('DOMContentLoaded', function () {\n    onReady()\n  })\n}\n"
        }
    ]
}